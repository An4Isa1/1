<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title><i>Pensum Economía</i> - UMNG</title>
  <style>
    /* Estilo general */
    body {
      font-family: "Times New Roman", serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
    }

    h1, h2 {
      font-family: Georgia, serif;
      font-style: italic;
      text-align: center;
    }

    h1 {
      font-size: 2em;
    }

    .contenedor-semestres {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }

    .semestre {
      border-radius: 15px;
      padding: 15px;
      width: 280px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .semestre h3 {
      font-weight: bold;
      text-align: center;
    }

    /* Colores por semestre */
    .semestre-1 { background-color: #d1e7dd; }
    .semestre-2 { background-color: #ffeeba; }
    .semestre-3 { background-color: #f8d7da; }
    .semestre-4 { background-color: #cfe2ff; }
    .semestre-5 { background-color: #e2e3e5; }
    .semestre-6 { background-color: #d4edda; }
    .semestre-7 { background-color: #fff3cd; }
    .semestre-8 { background-color: #f5c6cb; }
    .semestre-9 { background-color: #b8daff; }

    .materia {
      background-color: #fff;
      padding: 10px;
      margin: 6px 0;
      border-radius: 10px;
      cursor: pointer;
      position: relative;
    }

    .materia.bloqueada {
      background-color: #ccc;
      color: #666;
      cursor: not-allowed;
    }

    .materia.aprobada {
      text-decoration: line-through;
      background-color: #b0e57c;
    }

    .formulario {
      display: none;
      margin-top: 10px;
    }

    .formulario input {
      display: block;
      margin-bottom: 6px;
      width: 90%;
      padding: 4px;
      font-size: 14px;
    }

    .formulario button {
      padding: 6px 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1><i>Pensum Economía</i></h1>
  <h2>UMNG</h2>

  <!-- Contenedor principal de los semestres -->
  <div class="contenedor-semestres" id="contenedor"></div>

  <script>
    const materias = {
      1: [
        { nombre: "Economía I", requisitos: [] },
        { nombre: "Matemáticas I", requisitos: [] },
        { nombre: "Historia Económica General", requisitos: [] }
      ],
      2: [
        { nombre: "Economía II", requisitos: ["Economía I"] },
        { nombre: "Matemáticas II", requisitos: ["Matemáticas I"] }
      ],
      3: [
        { nombre: "Microeconomía I", requisitos: ["Economía II", "Matemáticas II"] },
        { nombre: "Contabilidad General", requisitos: [] }
      ]
      // Puedes continuar con los semestres 4 a 9 aquí...
    };

    const estado = JSON.parse(localStorage.getItem("estadoPensum")) || {};

    function crearMateria(materia, semestre) {
      const div = document.createElement("div");
      div.classList.add("materia");

      const desbloqueada = materia.requisitos.every(req => estado[req]?.aprobada);
      if (!desbloqueada) {
        div.classList.add("bloqueada");
      }

      if (estado[materia.nombre]?.aprobada) {
        div.classList.add("aprobada");
        div.textContent = `${materia.nombre} (Aprobada)`;
      } else {
        div.textContent = materia.nombre;
      }

      // Crear formulario oculto
      const formulario = document.createElement("div");
      formulario.classList.add("formulario");

      formulario.innerHTML = `
        <input type="text" placeholder="Profesor" name="profesor">
        <input type="number" placeholder="Nota 1" step="0.1" min="0" max="5" name="nota1">
        <input type="number" placeholder="Nota 2" step="0.1" min="0" max="5" name="nota2">
        <input type="number" placeholder="Nota 3" step="0.1" min="0" max="5" name="nota3">
        <button>Guardar</button>
      `;

      formulario.querySelector("button").addEventListener("click", () => {
        const profesor = formulario.querySelector('[name="profesor"]').value.trim();
        const n1 = parseFloat(formulario.querySelector('[name="nota1"]').value);
        const n2 = parseFloat(formulario.querySelector('[name="nota2"]').value);
        const n3 = parseFloat(formulario.querySelector('[name="nota3"]').value);

        if (!profesor || isNaN(n1) || isNaN(n2) || isNaN(n3)) {
          alert("Completa todos los campos correctamente.");
          return;
        }

        const promedio = ((n1 + n2 + n3) / 3).toFixed(2);

        estado[materia.nombre] = {
          profesor,
          notas: [n1, n2, n3],
          promedio,
          aprobada: promedio >= 3.0
        };

        localStorage.setItem("estadoPensum", JSON.stringify(estado));
        location.reload(); // Recargar para actualizar la vista
      });

      div.appendChild(formulario);

      div.addEventListener("click", () => {
        if (div.classList.contains("bloqueada")) {
          alert("No puedes cursar esta materia aún. Requisitos: " + materia.requisitos.join(", "));
          return;
        }

        // Alternar visibilidad del formulario
        const visible = formulario.style.display === "block";
        formulario.style.display = visible ? "none" : "block";
      });

      return div;
    }

    function cargarMaterias() {
      const contenedor = document.getElementById("contenedor");
      for (let semestre in materias) {
        const semDiv = document.createElement("div");
        semDiv.classList.add("semestre", `semestre-${semestre}`);
        semDiv.innerHTML = `<h3>Semestre <strong>${semestre}</strong></h3>`;

        materias[semestre].forEach(materia => {
          const matDiv = crearMateria(materia, semestre);
          semDiv.appendChild(matDiv);
        });

        contenedor.appendChild(semDiv);
      }
    }

    cargarMaterias();
  </script>

</body>
</html>
